sudo: false
language: ruby
rvm:
- 2.0.0
addons:
  apt:
    packages:
    - jpegoptim
    - optipng
before_script:
- pip install --user s3cmd
- chmod +x ./_scripts/init.sh
- "./_scripts/init.sh"
- bundle exec jekyll build
- chmod +x ./_scripts/deploy.sh
script:
- "./_scripts/deploy.sh"
branches:
  only:
  - master
  - stage
notifications:
  hipchat:
    rooms:
      secure: OofFMw+3fPDkpf6Kdt6raw//ylHzTYWIBLI25WJx3vNVne/jYN0fxES0j+AnIwKAb5Y9hKudx8Sk9lBIB28P2qDC178vpSaWYX4XTiRJYjTCFzJXCdBUugzXnvVa83hD2JCAZGUsfmhUplFiWaMxa9pZuSUvz3DlUo8BKVLN3lJkJsnHq6LLNgut0iVFQlTdwindIUyDpVQnZwE2R8o3sY5+Z0iQa4fByVkonH3z1zGEcXylmg/VMQA92Y2xwXQV3E6qUoL/A/DxaRDXzQO9IoSRApiKmCmrp69N+pkmTUKZ8vkG5vwPAsgyy+0qoRnHliWoPSL7T6Bn3wWKurbundIg58Xte11Lil4Y/ZVQoU2B67Swc1O93DpZbXhfy6lITn5WD/bNlJkKpZgUtChPzQ2PqaBAEPUAMPP/bIN31HzxFJ0t3bo+ORedQQk37HJeBh/ZNLkzm3s8d9SbthKvtkxz/wIe6+MctID3kyUAIX7aZvbXjuqB2SXnUuNDmKiiDVn+rOg5Ehn9Tv04EaRDvC82a9Q01N4F/XMqZOirsHGEPnb8A93yDk3Q0PveOZalzxKMMsBLrEBxGLR5GAwUfuUiF3KJlFkGNLJRdk0oYr4D8u+n6GU1fvJh1WJZl1UpRKQhldK+UvpWqxB5DpPut39B3o0hVz+h4NpGYIvCYfo=
    template:
    - '%{repository_slug} - <a href="%{build_url}">Build %{build_number}</a> <a href="%{compare_url}">%{commit}</a>
      on %{branch} by %{author}: %{commit_message} - Travis result: %{message}'
    format: html
env:
  global:
    - secure: fogln2A+m9pZTR7/BSUiJDZZMlsEo2URReGV/QbVkl8/mzz23qniSx+6z3q0Y2ePxT3QVK3qjcu+AMg/iulO7iHSIdW7BuCgoqlshrK+WzEHj3e0DLYGpJFw8vDpYzbOTcLO7AL8YmmdAUv2m7RmefGfcng9Rhll9dysiJspjXWnsRRjnASn5Z8K8gw2nodg673F+2kNckSZ/gIUpVTC8Unr+Tb0IMGcMsrnq2tCCektiAryELCtmpNvBL68FeLHe77cR8Yyt5bq13EyvWRnVxj8bQBElvmn/KtXyiYxgRHqrH2fYYi48vYZBg71uc9EoLv+VtDASxISvG/Ukif3jlPeTC1sQRILOK8rmXHm95Pi+k+CJDEqDS1lKCkfusIDWO0+AjrFZ0o5/Hg3k4cQqfCnqggZOc80/+su46HBzMk+nxIrLvWsSb1tHSPITwEN7Xdbb1JrCBMeQ7eLYWiIL4mCz7mC1LS2EVeB2uOHrriU7EI72GjZjSjCntIstUzTJ38i9XMxh7CBx92wRQWotZ1Ru0Co8+IIxtRCgrcirmtob1A4h6GZj9rA7zRtvqwi0MKVJlKFfk597wNHkWhTFQN/DK9w3/UQEZmdgpTqb54nXXzEZueHBvh/+WeUzpa1x0WRZ3w6WetlcA56AP7MTZAppPzMxGfyLYe24SSq3+8=
    - secure: i4I7eRseufQ/5AIrPz+QZdHDYFt+ufPY706cLLugY9AK58GJqlB1+WciidJmI5LIDOYbQjKeMhlloAduEEeHjt+UVFLVblHgft+3tJLOJRJIAQ8zt0WweKo9UQ6MQ8sOPDfndcOdwiLY+q8W4fp2ekxvkleh+xVJWwCT4tuADaUENZjHSeFyoO8vVbc0bbkPxwsMe8aDIYllWgW5UNB1wUp5yxVe3VoBbg8R7XCiWqN3FuX80PtDpCfCudzQNV8uRlQbCnqVJJu97qVs7dc4ZY4Ia3I/4O0lc0ZyN+0JMIS9I1oHeNhck2iwCOvNf9sUXfh64eJmPNtlDseL5tsxji+Xvsv4lQA/VLQrtqWO6PVM3tn/835Qxe8iDTSlY1xOsQ5+5rGeor93CNJpS/VKUwTBP9MSkAlDE+MV2SPUDrrRKMCciQOBJICUKtiriVXVG/6+o4sA/E5aPobGbT4KmOWK//WGJF9cC2BaRzdCn8Rm7yWXMYudacLvL6z4vNKvcyfwNuGHT03WZ9uPKmHrANTnTJ2hZY3wPXngRZlxNxaP0bSErZLnYDZ9AZWmwMBoXicuu3PInCW+jXq3F0sPXA2JzyhhaSVB+MrIAHBnJJfec3mL2UH6UHA/O4A/SQaU8ZhKSKBqPodqCt4TtPN0rGr80U6dtPH+DLc38p6Gg5Y=
